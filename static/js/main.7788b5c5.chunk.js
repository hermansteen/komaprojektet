(this.webpackJsonpkomaprojektet=this.webpackJsonpkomaprojektet||[]).push([[0],{10:function(e,a,t){},12:function(e,a,t){},13:function(e,a,t){"use strict";t.r(a);var r=t(0),n=t.n(r),c=t(4),s=t.n(c),o=(t(10),t(1)),i=t.n(o),l=t(5),m=t(2);function u(){var e;return new Promise((function(a,t){navigator.geolocation.getCurrentPosition((function(t){console.log(t.coords.latitude,t.coords.longitude);var r=t.coords.longitude.toPrecision(8),n=t.coords.latitude.toPrecision(8);console.log(r,n),e="https://opendata-download-metfcst.smhi.se/api/category/pmp3g/version/2/geotype/point/lon/"+r+"/lat/"+n+"/data.json",console.log(e),fetch(e).then((function(e){return e.json()})).then((function(e){a(e)}))}))}))}function d(){var e;return new Promise((function(a,t){navigator.geolocation.getCurrentPosition((function(t){e="https://us1.locationiq.com/v1/reverse.php?key=pk.3c7d149b10792893ae85cb1c22148eca&lat="+t.coords.latitude+"&lon="+t.coords.longitude+"&format=json",fetch(e).then((function(e){return e.json()})).then((function(e){a(e)}))}))}))}function g(e){var a;switch(e){case 1:a="./img/clear.svg";break;case 2:case 3:case 4:a="./img/halfclear.svg";break;case 5:a="./img/cloudy.svg";break;case 6:a="./img/overcast.svg";break;case 7:a="./img/fog.svg";break;case 8:case 9:case 10:case 18:case 19:case 20:a="./img/rain.svg";break;case 11:a="./img/thunderstorm.svg";break;case 12:case 13:case 14:case 22:case 23:case 24:a="./img/sleet.svg";break;case 21:a="./img/thunder.svg";break;case 25:case 26:case 27:case 15:case 16:case 17:a="./img/snow.svg";break;default:a="default"}return a}var v=function(e){var a={};console.log(e.data);for(var t=0;t<e.data[1].parameters.length;t++){var r=e.data[1].parameters[t];switch(r.name){case"t":a.temperature=Math.round(r.values[0]);break;case"Wsymb2":a.cat=r.values[0];break;case"pmean":a.precip=r.values[0]}}var c=e.data[1].validTime.substr(11,5);return n.a.createElement("div",{className:"HourInfo"},n.a.createElement("p",null,c),n.a.createElement("img",{src:g(a.cat)}),n.a.createElement("p",null,a.temperature+"\xb0"))};var p=function(e){console.log("props data"),console.log(e);for(var a={},t=0,r=0;r<e.data.length;r+=2)a[t]=e.data[r],t++;return console.log("Hourlist: "),console.log(a),n.a.createElement("div",{className:"HourList"},Object.entries(a).map((function(e){return n.a.createElement(v,{data:e,key:e.validTime})})))};var f=function(e){return n.a.createElement("div",{className:"Menu"},n.a.createElement("div",{id:"leftSideMenu"},n.a.createElement("a",{href:"/"},n.a.createElement("img",{src:"./img/needle.svg"})),n.a.createElement("h1",null,e.city)),n.a.createElement("img",{src:"./img/amburgur.png"}))};var h=function(e){for(var a={},t=0;t<e.data.length;t++){a[t]=[];for(var r=0;r<e.data[t].parameters.length;r++){var c=e.data[t].parameters[r];switch(c.name){case"t":a[t].temperature=Math.round(c.values[0]);break;case"Wsymb2":a[t].cat=c.values[0];break;case"pmean":a[t].precip=c.values[0]}}}for(var s=1e6,o=-999999,i=0,l=0;l<e.data.length;l++)a[l].temperature>o&&(o=a[l].temperature),a[l].temperature<s&&(s=a[l].temperature),a[l].imageFile=g(a[l].cat),a[l].precip>0&&(i=1);return n.a.createElement("div",{className:"SplashScreen"},n.a.createElement("p",{className:"description"},i?"Regnskurar kan f\xf6rekomma under dagen":"Inget regn idag"),n.a.createElement("img",{id:"currentIcon",src:a[0].imageFile,alt:"current weather icon"}),n.a.createElement("h2",{className:"current"},a[0].temperature+"\xb0"),n.a.createElement("div",{className:"minMax"},n.a.createElement("h3",null,"min/max"),n.a.createElement("h3",null,s+"\xb0/"+o+"\xb0")))};var b=function(e){for(var a={},t=0;t<e.data.length;t++){a[t]=[];for(var r=0;r<e.data[t].parameters.length;r++){var c=e.data[t].parameters[r];"pmean"===c.name&&(a[t].precip=c.values[0]),a[t].time=e.data[t].validTime.substr(11,5)}}for(var s=-1,o=0;o<e.data.length;o++)a[o].precip>s&&(s=a[o].precip);console.log(s);var i=s/100;console.log(a);for(var l=0;l<e.data.length;l++)0!==i?(a[l].barHeight=a[l].precip/i+"px",console.log(a[l].barHeight)):a[l].barHeight="1px","0px"===a[l].barHeight&&(a[l].barHeight="1px");return n.a.createElement("div",{className:"RainGraph"},Object.keys(a).map((function(e){return n.a.createElement("div",{key:e,className:"graphContainer"},n.a.createElement("div",{className:"bar",style:{height:a[e].barHeight}}),n.a.createElement("div",{className:"graphLabel",key:e},a[e].time))})))};t(12);var E=function(){var e,a=Object(r.useState)(),t=Object(m.a)(a,2),c=t[0],s=t[1],o=Object(r.useState)(),g=Object(m.a)(o,2),v=g[0],E=g[1];Object(r.useEffect)((function(){(function(){var e=Object(l.a)(i.a.mark((function e(){var a,t;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,u();case 2:return a=e.sent,e.next=5,d();case 5:t=e.sent,console.log(t),s(a.timeSeries),t.address.city&&(t.address.town=t.address.city),E(t);case 10:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}})()()}),[]);var k=6e4*(new Date).getTimezoneOffset(),w=new Date(Date.now()-k).toISOString().slice(0);return c&&(e=c.filter((function(e){return e.validTime.indexOf(w.substr(0,10))>-1}))),n.a.createElement("div",{className:"App"},c&&v?n.a.createElement("div",null,n.a.createElement(f,{city:v.address.town}),n.a.createElement(h,{data:e}),n.a.createElement(p,{data:e}),n.a.createElement("h2",{className:"interTitle"},"Nederb\xf6rd (%)"),n.a.createElement(b,{data:e})):null)};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));s.a.render(n.a.createElement(n.a.StrictMode,null,n.a.createElement(E,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[13,1,2]]]);
//# sourceMappingURL=main.7788b5c5.chunk.js.map